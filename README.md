# AI æ—…è¡Œè§„åˆ’åŠ©æ‰‹

åŸºäºäººå·¥æ™ºèƒ½çš„æ™ºèƒ½æ—…è¡Œè§„åˆ’ç³»ç»Ÿï¼Œé€šè¿‡è¯­éŸ³è¾“å…¥å’Œå¤§è¯­è¨€æ¨¡å‹ä¸ºç”¨æˆ·ç”Ÿæˆä¸ªæ€§åŒ–çš„æ—…è¡Œè®¡åˆ’ï¼Œå¹¶æä¾›å®æ—¶è´¹ç”¨ç®¡ç†å’Œåœ°å›¾å¯¼èˆªåŠŸèƒ½ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

AI æ—…è¡Œè§„åˆ’åŠ©æ‰‹æ˜¯ä¸€æ¬¾å…¨æ ˆ Web åº”ç”¨ï¼Œæ—¨åœ¨ç®€åŒ–æ—…è¡Œè§„åˆ’è¿‡ç¨‹ã€‚é€šè¿‡é›†æˆè¯­éŸ³è¯†åˆ«ã€å¤§è¯­è¨€æ¨¡å‹ã€åœ°å›¾æœåŠ¡ç­‰æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›æ™ºèƒ½åŒ–çš„æ—…è¡Œè§„åˆ’ä½“éªŒã€‚

### æ ¸å¿ƒåŠŸèƒ½

1. **ğŸ¤ æ™ºèƒ½è¡Œç¨‹è§„åˆ’**
   - æ”¯æŒè¯­éŸ³å’Œæ–‡å­—è¾“å…¥æ—…è¡Œéœ€æ±‚
   - AI è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„æ—…è¡Œè·¯çº¿
   - åŒ…å«äº¤é€šã€ä½å®¿ã€æ™¯ç‚¹ã€é¤å…ç­‰å®Œæ•´ä¿¡æ¯

2. **ğŸ’° è´¹ç”¨é¢„ç®—ä¸ç®¡ç†**
   - AI æ™ºèƒ½é¢„ç®—åˆ†æ
   - å®æ—¶è´¹ç”¨è®°å½•ï¼ˆæ”¯æŒè¯­éŸ³è¾“å…¥ï¼‰
   - é¢„ç®—ä½¿ç”¨æƒ…å†µå¯è§†åŒ–å±•ç¤º

3. **ğŸ—ºï¸ åœ°å›¾å¯¼èˆª**
   - é«˜å¾·åœ°å›¾é›†æˆ
   - è¡Œç¨‹è·¯çº¿å¯è§†åŒ–
   - æ™¯ç‚¹ä½ç½®æ ‡æ³¨

4. **ğŸ‘¤ ç”¨æˆ·ç®¡ç†ä¸æ•°æ®å­˜å‚¨**
   - å®Œæ•´çš„æ³¨å†Œç™»å½•ç³»ç»Ÿ
   - äº‘ç«¯è¡Œç¨‹åŒæ­¥ï¼ˆSupabaseï¼‰
   - å¤šè®¾å¤‡æ•°æ®åŒæ­¥

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **çŠ¶æ€ç®¡ç†**: Zustand
- **è·¯ç”±**: React Router v6
- **æ ·å¼**: CSS-in-JS (å†…è”æ ·å¼)
- **åœ°å›¾**: é«˜å¾·åœ°å›¾ API
- **è¯­éŸ³è¯†åˆ«**: Web Speech API

### åç«¯
- **è¿è¡Œæ—¶**: Node.js 20
- **æ¡†æ¶**: Express.js + TypeScript
- **èº«ä»½è®¤è¯**: JWT
- **å¯†ç åŠ å¯†**: bcrypt
- **æ•°æ®åº“**: PostgreSQL (Supabase)
- **ORM/å®¢æˆ·ç«¯**: Supabase Client

### AI æœåŠ¡
- **å¤§è¯­è¨€æ¨¡å‹**: é˜¿é‡Œäº‘é€šä¹‰åƒé—® (DashScope API)
- **ç”¨é€”**: è¡Œç¨‹è§„åˆ’ã€è´¹ç”¨åˆ†æ

### éƒ¨ç½²
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **CI/CD**: GitHub Actions
- **é•œåƒä»“åº“**: é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
ai-travel-planner/
â”œâ”€â”€ frontend/                 # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/        # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ App.tsx          # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.tsx         # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ backend/                  # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/          # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.ts         # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ database/                 # æ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ schema.sql           # æ•°æ®åº“æ¨¡å¼
â”œâ”€â”€ .github/workflows/        # GitHub Actions
â”‚   â”œâ”€â”€ ci.yml               # æŒç»­é›†æˆ
â”‚   â””â”€â”€ docker-build.yml     # Docker æ„å»ºå’Œæ¨é€
â”œâ”€â”€ Dockerfile.backend        # åç«¯ Docker é…ç½®
â”œâ”€â”€ Dockerfile.frontend       # å‰ç«¯ Docker é…ç½®
â”œâ”€â”€ docker-compose.yml        # Docker Compose é…ç½®
â”œâ”€â”€ nginx.conf               # Nginx é…ç½®
â””â”€â”€ README.md                # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 20+ å’Œ npm
- Docker å’Œ Docker Composeï¼ˆç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰
- Supabase è´¦å·ï¼ˆå…è´¹ï¼‰
- é˜¿é‡Œäº‘ DashScope API Keyï¼ˆå¯é€‰ï¼Œç”¨äº AI åŠŸèƒ½ï¼‰
- é«˜å¾·åœ°å›¾ API Keyï¼ˆå¯é€‰ï¼Œç”¨äºåœ°å›¾åŠŸèƒ½ï¼‰

### ç¯å¢ƒé…ç½®

#### 1. Supabase é…ç½®

1. è®¿é—® [Supabase](https://supabase.com) åˆ›å»ºå…è´¹è´¦å·
2. åˆ›å»ºæ–°é¡¹ç›®
3. åœ¨ SQL ç¼–è¾‘å™¨ä¸­è¿è¡Œ `database/schema.sql` è„šæœ¬
4. è·å–é¡¹ç›® URL å’Œ Service Keyï¼ˆåœ¨ Settings > APIï¼‰

#### 2. é˜¿é‡Œäº‘ DashScope APIï¼ˆé€šä¹‰åƒé—®ï¼‰

1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°](https://dashscope.console.aliyun.com/)
2. å¼€é€šæœåŠ¡å¹¶è·å– API Key
3. å»ºè®®ï¼šä½¿ç”¨é€šä¹‰åƒé—® Max æ¨¡å‹ä»¥è·å¾—æœ€ä½³æ•ˆæœ

**åŠ©æ•™ä¸“ç”¨ API Keyï¼ˆæœ‰æ•ˆæœŸ3ä¸ªæœˆï¼‰**: `sk-xxxxxxxxxxxxxxxxxxxxx`
ï¼ˆæ­¤å¤„åº”å¡«å…¥å®é™…çš„ API Keyï¼Œä»…ä¾›ä½œä¸šæ‰¹æ”¹ä½¿ç”¨ï¼‰

#### 3. é«˜å¾·åœ°å›¾ API Key

1. è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°](https://console.amap.com/)
2. æ³¨å†Œå¹¶åˆ›å»ºåº”ç”¨
3. è·å– Web æœåŠ¡ API Key

### æœ¬åœ°å¼€å‘

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/your-username/ai-travel-planner.git
cd ai-travel-planner
```

2. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„é…ç½®
nano .env
```

3. å¯åŠ¨æœåŠ¡
```bash
docker-compose up -d
```

4. è®¿é—®åº”ç”¨
- å‰ç«¯: http://localhost
- åç«¯ API: http://localhost:3000

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è¿è¡Œ

1. å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ ¹ç›®å½•ä¾èµ–
npm install

# å®‰è£…å‰åç«¯ä¾èµ–
cd frontend && npm install
cd ../backend && npm install
```

2. é…ç½®ç¯å¢ƒå˜é‡
```bash
# åç«¯ç¯å¢ƒå˜é‡
cp backend/.env.example backend/.env
# ç¼–è¾‘ backend/.env

# å‰ç«¯ç¯å¢ƒå˜é‡
cp frontend/.env.example frontend/.env
# ç¼–è¾‘ frontend/.env
```

3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run dev

# æˆ–åˆ†åˆ«å¯åŠ¨
npm run dev:backend  # åç«¯: http://localhost:3000
npm run dev:frontend # å‰ç«¯: http://localhost:5173
```

### ç”Ÿäº§éƒ¨ç½²

#### ä½¿ç”¨ Docker Compose

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

#### ä½¿ç”¨é¢„æ„å»ºçš„ Docker é•œåƒ

å¦‚æœæ‚¨å·²ç»å°†é•œåƒæ¨é€åˆ°é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ï¼š

```bash
# æ‹‰å–é•œåƒ
docker pull registry.cn-hangzhou.aliyuncs.com/your-namespace/travel-planner-backend:latest
docker pull registry.cn-hangzhou.aliyuncs.com/your-namespace/travel-planner-frontend:latest

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 \
  -e JWT_SECRET=your-secret \
  -e SUPABASE_URL=your-url \
  -e SUPABASE_SERVICE_KEY=your-key \
  -e DASHSCOPE_API_KEY=your-key \
  registry.cn-hangzhou.aliyuncs.com/your-namespace/travel-planner-backend:latest

docker run -d -p 80:80 \
  registry.cn-hangzhou.aliyuncs.com/your-namespace/travel-planner-frontend:latest
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### 1. æ³¨å†Œè´¦æˆ·

1. è®¿é—®åº”ç”¨é¦–é¡µ
2. ç‚¹å‡»"ç«‹å³æ³¨å†Œ"
3. å¡«å†™å§“åã€é‚®ç®±å’Œå¯†ç 

### 2. è§„åˆ’è¡Œç¨‹

#### æ–¹å¼ä¸€ï¼šè¡¨å•è¾“å…¥

1. ç‚¹å‡»"è§„åˆ’æ–°è¡Œç¨‹"
2. å¡«å†™æ—…è¡Œä¿¡æ¯ï¼š
   - ç›®çš„åœ°
   - å‡ºå‘å’Œç»“æŸæ—¥æœŸ
   - é¢„ç®—
   - åŒè¡Œäººæ•°
   - æ—…è¡Œåå¥½

#### æ–¹å¼äºŒï¼šè¯­éŸ³è¾“å…¥ï¼ˆæ¨èï¼‰

1. ç‚¹å‡»"å¼€å§‹è¯­éŸ³è¾“å…¥"æŒ‰é’®
2. è¯´å‡ºæ‚¨çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼š
   > "æˆ‘æƒ³å»æ—¥æœ¬ä¸œäº¬ï¼Œ5å¤©ï¼Œé¢„ç®—1ä¸‡å…ƒï¼Œå–œæ¬¢ç¾é£Ÿå’ŒåŠ¨æ¼«ï¼Œ2ä¸ªäºº"
3. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¹¶å¡«å……è¡¨å•

#### ç”Ÿæˆè¡Œç¨‹

ç‚¹å‡»"ç”Ÿæˆè¡Œç¨‹è®¡åˆ’"ï¼ŒAI å°†åœ¨å‡ ç§’é’Ÿå†…ä¸ºæ‚¨ç”Ÿæˆï¼š
- æ¯æ—¥è¯¦ç»†è¡Œç¨‹å®‰æ’
- æ™¯ç‚¹æ¨èå’Œæ—¶é—´è§„åˆ’
- ä½å®¿å»ºè®®
- äº¤é€šæ–¹æ¡ˆ
- é¢„ç®—åˆ†é…
- æ—…è¡Œè´´å£«

### 3. æŸ¥çœ‹è¡Œç¨‹è¯¦æƒ…

åœ¨è¡Œç¨‹è¯¦æƒ…é¡µé¢ï¼Œæ‚¨å¯ä»¥ï¼š

**è¡Œç¨‹å®‰æ’æ ‡ç­¾**
- æŸ¥çœ‹æ¯æ—¥è¯¦ç»†æ´»åŠ¨
- æŸ¥çœ‹ä½å®¿å’Œäº¤é€šå»ºè®®
- é˜…è¯» AI ç”Ÿæˆçš„æ—…è¡Œè´´å£«

**åœ°å›¾å¯¼èˆªæ ‡ç­¾**
- åœ¨é«˜å¾·åœ°å›¾ä¸ŠæŸ¥çœ‹æ‰€æœ‰æ™¯ç‚¹ä½ç½®
- æŸ¥çœ‹è¡Œç¨‹è·¯çº¿
- ç‚¹å‡»æ ‡è®°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

**è´¹ç”¨ç®¡ç†æ ‡ç­¾**
- æŸ¥çœ‹é¢„ç®—ä½¿ç”¨æƒ…å†µ
- æ·»åŠ æ”¯å‡ºè®°å½•ï¼ˆæ”¯æŒè¯­éŸ³è¾“å…¥ï¼‰
- æŸ¥çœ‹åˆ†ç±»ç»Ÿè®¡
- å®æ—¶é¢„ç®—æé†’

### 4. è´¹ç”¨ç®¡ç†

#### æ·»åŠ æ”¯å‡ºï¼ˆè¡¨å•è¾“å…¥ï¼‰

1. ç‚¹å‡»"æ·»åŠ æ”¯å‡ºè®°å½•"
2. é€‰æ‹©ç±»åˆ«ï¼ˆä½å®¿ã€äº¤é€šã€é¤é¥®ç­‰ï¼‰
3. è¾“å…¥é‡‘é¢å’Œæè¿°
4. é€‰æ‹©æ—¥æœŸ

#### æ·»åŠ æ”¯å‡ºï¼ˆè¯­éŸ³è¾“å…¥ï¼‰

1. ç‚¹å‡»"å¼€å§‹è¯­éŸ³è¾“å…¥"
2. è¯´å‡ºæ”¯å‡ºä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š
   > "åˆé¤èŠ±äº†80å…ƒ"
3. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«é‡‘é¢å’Œæè¿°

## ğŸ”§ API æ–‡æ¡£

### è®¤è¯ API

#### æ³¨å†Œ
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123",
  "name": "å¼ ä¸‰"
}
```

#### ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

### è¡Œç¨‹ API

æ‰€æœ‰è¡Œç¨‹ API éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­åŒ…å« JWT Tokenï¼š
```http
Authorization: Bearer <token>
```

#### è·å–æ‰€æœ‰è¡Œç¨‹
```http
GET /api/trips
```

#### è·å–å•ä¸ªè¡Œç¨‹
```http
GET /api/trips/:id
```

#### åˆ›å»ºè¡Œç¨‹
```http
POST /api/trips
Content-Type: application/json

{
  "destination": "ä¸œäº¬",
  "startDate": "2024-06-01",
  "endDate": "2024-06-05",
  "budget": 10000,
  "travelers": 2,
  "preferences": "å–œæ¬¢ç¾é£Ÿå’Œæ–‡åŒ–",
  "itinerary": { /* AIç”Ÿæˆçš„è¡Œç¨‹ */ },
  "expenses": []
}
```

#### æ›´æ–°è¡Œç¨‹
```http
PUT /api/trips/:id
Content-Type: application/json

{
  /* æ›´æ–°çš„å­—æ®µ */
}
```

#### åˆ é™¤è¡Œç¨‹
```http
DELETE /api/trips/:id
```

### AI API

#### ç”Ÿæˆè¡Œç¨‹
```http
POST /api/ai/generate-itinerary
Content-Type: application/json
Authorization: Bearer <token>

{
  "destination": "ä¸œäº¬",
  "days": 5,
  "budget": 10000,
  "travelers": 2,
  "preferences": "å–œæ¬¢ç¾é£Ÿå’Œæ–‡åŒ–"
}
```

#### åˆ†æè´¹ç”¨
```http
POST /api/ai/analyze-expenses
Content-Type: application/json
Authorization: Bearer <token>

{
  "expenses": [ /* è´¹ç”¨åˆ—è¡¨ */ ],
  "budget": 10000
}
```

## ğŸ” å®‰å…¨æ€§

- å¯†ç ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨
- JWT Token ç”¨äºèº«ä»½éªŒè¯
- API è·¯ç”±å—ä¸­é—´ä»¶ä¿æŠ¤
- Supabase Row Level Security (RLS) ç¡®ä¿æ•°æ®éš”ç¦»
- ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- HTTPS æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“ å¼€å‘æ—¥å¿—

- **2024-01**: é¡¹ç›®åˆå§‹åŒ–ï¼Œå®ŒæˆåŸºç¡€æ¶æ„è®¾è®¡
- **2024-01**: å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **2024-01**: é›†æˆè¯­éŸ³è¯†åˆ«åŠŸèƒ½
- **2024-01**: é›†æˆé˜¿é‡Œäº‘é€šä¹‰åƒé—® API
- **2024-01**: å®ç°è¡Œç¨‹è§„åˆ’æ ¸å¿ƒåŠŸèƒ½
- **2024-01**: é›†æˆé«˜å¾·åœ°å›¾æœåŠ¡
- **2024-01**: å®ç°è´¹ç”¨ç®¡ç†åŠŸèƒ½
- **2024-01**: Docker åŒ–éƒ¨ç½²
- **2024-01**: GitHub Actions CI/CD é…ç½®

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦æœ¯ç›®çš„ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…

- å§“åï¼š[æ‚¨çš„å§“å]
- å­¦å·ï¼š[æ‚¨çš„å­¦å·]
- é‚®ç®±ï¼š[æ‚¨çš„é‚®ç®±]
- GitHub: [æ‚¨çš„ GitHub ä¸»é¡µ]

## ğŸ™ è‡´è°¢

- é˜¿é‡Œäº‘é€šä¹‰åƒé—®æä¾›çš„å¼ºå¤§ AI èƒ½åŠ›
- Supabase æä¾›çš„ä¾¿æ·åç«¯æœåŠ¡
- é«˜å¾·åœ°å›¾æä¾›çš„åœ°å›¾æœåŠ¡
- React å’Œ Node.js ç¤¾åŒº

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£
2. æäº¤ Issue
3. è”ç³»ä½œè€…

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä¸ºç ”ç©¶ç”Ÿè¯¾ç¨‹ä½œä¸šé¡¹ç›®ï¼ŒæŒç»­æ›´æ–°ä¸­ã€‚

